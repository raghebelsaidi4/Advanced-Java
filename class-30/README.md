# Converted Servlet or JSP "Servlet" Life Cycle Methods

The lifecycle of a JSP (converted servlet) consists of three main methods:

1. **`jspInit()`**
2. **`_jspService()`**
3. **`jspDestroy()`**

These methods are part of the JSP lifecycle and are managed by the web container.

---

## 1. `jspInit()` Method

- **Purpose**: This method is called by the web container when the first request comes to a JSP.
- **Interface**: It is part of the `jakarta.servlet.jsp.JspPage` interface.
- **Override**: This method can be overridden by the programmer in the JSP because it is not overridden by the JSP engine.
- **Example**:
  ```jsp
  <%!
      public void jspInit() {
          System.out.println("JSP Initialized");
      }
  %>
  ```

---

## 2. `_jspService()` Method

- **Purpose**: This method is called by the web container for every request to the JSP.
- **Interface**: It is part of the `jakarta.servlet.jsp.HttpJspPage` interface.
- **Override**: This method **cannot** be overridden by the programmer because it is already overridden by the JSP engine.
- **Method Signature**:
  ```java
  public void _jspService(HttpServletRequest request, HttpServletResponse response)
      throws jakarta.servlet.ServletException, java.io.IOException {
      // JSP engine-generated code to handle requests
  }
  ```
- **Explanation**: The `_jspService()` method is responsible for processing all client requests and generating the corresponding responses. It is automatically generated by the JSP engine and contains the logic to execute the JSP code.

---

## 3. `jspDestroy()` Method

- **Purpose**: This method is called by the web container whenever the converted servlet instance is removed from the web container.
- **When is it called?**:
    - When the web application is undeployed from the server.
    - When the server shuts down.
- **Example**:
  ```jsp
  <%!
      public void jspDestroy() {
          System.out.println("JSP Destroyed");
      }
  %>
  ```

---

# Directives in JSP

Directives are used to provide instructions to the JSP engine. There are three types of directives in JSP:

1. **Page Directive**
2. **Include Directive**
3. **Taglib Directive**

---

## 1. Page Directive

- **Syntax**: `<%@page ... %>`
- **Attributes**:
    - **`language`**: Specifies the scripting language used in the JSP. Default is `java`.
      ```jsp
      <%@page language="java"%>
      ```
    - **`import`**: Used to import Java classes or packages.
      ```jsp
      <%@page import="java.sql.*, java.util.ArrayList"%>
      ```
    - **`buffer`**: Specifies the buffer size for the JSP output. Default is `8kb`.
      ```jsp
      <%@page buffer="16kb"%>
      ```
    - **`autoFlush`**: Controls whether the buffer should be automatically flushed when full. Default is `true`.
      ```jsp
      <%@page autoFlush="true"%>
      ```
    - **`errorPage`**: Specifies the URL of the error page to be displayed when an exception occurs.
      ```jsp
      <%@page errorPage="error.jsp"%>
      ```
    - **`isErrorPage`**: Indicates whether the current JSP is an error page. Default is `false`.
      ```jsp
      <%@page isErrorPage="true"%>
      ```
    - **`contentType`**: Specifies the MIME type and character encoding of the response. Default is `text/html`.
      ```jsp
      <%@page contentType="text/html; charset=UTF-8"%>
      ```
    - **`isELIgnored`**: Used to ignore Expression Language (EL) in the JSP.
      ```jsp
      <%@page isELIgnored="true"%>
      ```
    - **`session`**: Indicates whether the JSP participates in session management. Default is `true`.
      ```jsp
      <%@page session="false"%>
      ```
    - **`isThreadSafe`**: Indicates whether the JSP is thread-safe. Default is `true`.
      ```jsp
      <%@page isThreadSafe="false"%>
      ```
        - If `isThreadSafe="false"`, the web container implements the `jakarta.servlet.SingleThreadModel` interface in the converted servlet. This ensures that only one thread executes the servlet at a time, equivalent to synchronization.
        - **Note**: `SingleThreadModel` is a marker interface (an interface with no methods) and is deprecated in modern servlet APIs.

---